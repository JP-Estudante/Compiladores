#include <stdio.h>
#include <math.h>
#include <complex.h>

void menu() {
    printf("\n--- CALCULADORA COMPLEXA ---\n");
    printf("Escolha uma opção:\n");
    printf("1. Adição\n");
    printf("2. Subtração\n");
    printf("3. Multiplicação\n");
    printf("4. Divisão\n");
    printf("5. Potência\n");
    printf("6. Raiz quadrada\n");
    printf("7. Seno\n");
    printf("8. Cosseno\n");
    printf("9. Tangente\n");
    printf("10. Operações com números complexos\n");
    printf("11. Sair\n");
}

void operacoesBasicas() {
    int opcao;
    double num1, num2, resultado;

    printf("Digite o primeiro número: ");
    scanf("%lf", &num1);
    printf("Digite o segundo número: ");
    scanf("%lf", &num2);

    printf("Escolha a operação:\n1. Adição\n2. Subtração\n3. Multiplicação\n4. Divisão\n");
    scanf("%d", &opcao);

    switch (opcao) {
        case 1:
            resultado = num1 + num2;
            printf("Resultado: %.2lf\n", resultado);
            break;
        case 2:
            resultado = num1 - num2;
            printf("Resultado: %.2lf\n", resultado);
            break;
        case 3:
            resultado = num1 * num2;
            printf("Resultado: %.2lf\n", resultado);
            break;
        case 4:
            if (num2 != 0) {
                resultado = num1 / num2;
                printf("Resultado: %.2lf\n", resultado);
            } else {
                printf("Erro: Divisão por zero!\n");
            }
            break;
        default:
            printf("Opção inválida!\n");
            break;
    }
}

void potencia() {
    double base, expoente, resultado;

    printf("Digite a base: ");
    scanf("%lf", &base);
    printf("Digite o expoente: ");
    scanf("%lf", &expoente);

    resultado = pow(base, expoente);
    printf("Resultado: %.2lf\n", resultado);
}

void raizQuadrada() {
    double num, resultado;

    printf("Digite um número: ");
    scanf("%lf", &num);

    if (num >= 0) {
        resultado = sqrt(num);
        printf("Resultado: %.2lf\n", resultado);
    } else {
        printf("Erro: Número negativo!\n");
    }
}

void trigonometria(int opcao) {
    double angulo, resultado;

    printf("Digite o ângulo (em radianos): ");
    scanf("%lf", &angulo);

    switch (opcao) {
        case 7:
            resultado = sin(angulo);
            printf("Seno: %.2lf\n", resultado);
            break;
        case 8:
            resultado = cos(angulo);
            printf("Cosseno: %.2lf\n", resultado);
            break;
        case 9:
            resultado = tan(angulo);
            printf("Tangente: %.2lf\n", resultado);
            break;
        default:
            printf("Opção inválida!\n");
            break;
    }
}

void operacoesComplexas() {
    double real1, imag1, real2, imag2;
    double complex num1, num2, resultado;
    int opcao;

    printf("Digite a parte real do primeiro número: ");
    scanf("%lf", &real1);
    printf("Digite a parte imaginária do primeiro número: ");
    scanf("%lf", &imag1);
    num1 = real1 + imag1 * I;

    printf("Digite a parte real do segundo número: ");
    scanf("%lf", &real2);
    printf("Digite a parte imaginária do segundo número: ");
    scanf("%lf", &imag2);
    num2 = real2 + imag2 * I;

    printf("Escolha a operação com números complexos:\n1. Adição\n2. Subtração\n3. Multiplicação\n4. Divisão\n");
    scanf("%d", &opcao);

    switch (opcao) {
        case 1:
            resultado = num1 + num2;
            printf("Resultado: %.2lf + %.2lfi\n", creal(resultado), cimag(resultado));
            break;
        case 2:
            resultado = num1 - num2;
            printf("Resultado: %.2lf + %.2lfi\n", creal(resultado), cimag(resultado));
            break;
        case 3:
            resultado = num1 * num2;
            printf("Resultado: %.2lf + %.2lfi\n", creal(resultado), cimag(resultado));
            break;
        case 4:
            if (cabs(num2) != 0) {
                resultado = num1 / num2;
                printf("Resultado: %.2lf + %.2lfi\n", creal(resultado), cimag(resultado));
            } else {
                printf("Erro: Divisão por zero!\n");
            }
            break;
        default:
            printf("Opção inválida!\n");
            break;
    }
}

int main() {
    int opcao;

    while (1) {
        menu();
        scanf("%d", &opcao);

        switch (opcao) {
            case 1: case 2: case 3: case 4:
                operacoesBasicas();
                break;
            case 5:
                potencia();
                break;
            case 6:
                raizQuadrada();
                break;
            case 7: case 8: case 9:
                trigonometria(opcao);
                break;
            case 10:
                operacoesComplexas();
                break;
            case 11:
                printf("Saindo...\n");
                return 0;
            default:
                printf("Opção inválida!\n");
                break;
        }
    }
}
